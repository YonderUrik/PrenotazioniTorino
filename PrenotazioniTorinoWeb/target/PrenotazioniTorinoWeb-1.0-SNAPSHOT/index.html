<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1">
    <title>Ripetizioni Torino</title>
    <link rel="icon" href="img/logo_small_icon_only.png"  type="icon"/>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>


</head>
<body>
<!--Login Form-->
<div id="login" v-show = "this.show">
    <p>Email <label>
        <input v-model="email" type="text"/>
    </label></p>
    <p>Password: <label>
        <input v-model="password" type="password"/>
    </label></p>
    <button type="button" v-on:click="this.login">Login</button>
    <p><button type="button" v-on:click="this.passtosignup"> Registrati</button></p>
</div>

<!--Signup Form-->
<div id="sign-up" v-show = "this.show">
    <p>Nome: <label>
        <input v-model="nome" type="text"/>
    </label></p>
    <p>Cognome: <label>
        <input v-model="cognome" type="text"/>
    </label></p>
    <p>Email: <label>
        <input v-model="email" type="text"/>
    </label></p>
    <p>Password: <label>
        <input v-model="password" type="password">
    </label></p>
    <button type="button" v-on:click="this.signup">Registrati</button>
</div>
<div id="homepage-administrator" v-show="this.show">
    <h1>Bentornato Amministratore</h1>
</div>

<div id="homepage-student" v-show="this.show">
    <h1>Bentornato Studente</h1>
</div>

<div id="homepage-guest" v-show="this.show">
    <h1>Benvenuto Ospite</h1>
</div>
<script>
    //LOGIN VUE
    var login= new Vue({
        el:'#login',
        data:{
            sessione:'sessione inesistente',
            email:'guest',
            password:'',
            link: 'aut-servlet',
            show: true
        },
        mounted: function () {
            console.log("MOUNTED")
        },
        methods: {
            login:function(){
                var self=this;
                if(self.sessione === 'sessione inesistente')
                    $.post(this.link, {utente: this.email, password: this.password}, function (data){});
                //TODO: il cambio schermata avviene anche inserendo un utente errato
                this.show = !this;
                administrator.show = !administrator.show;
            },
            passtosignup:function (){
                this.show = !this;
                signup.show = !signup.show;
            }
        }
    })

    //SIGNUP VUE
    var signup = new Vue({
        el:'#sign-up',
        data:{
            nome:'',
            cognome:'',
            email:'',
            password:'',
            link: 'signup-servlet',
            show: false
        },
        methods:{
            signup:function (){
                $.post(this.link,{nome: this.nome, cognome: this.cognome, email: this.email, password:this.password},function(data){

                });
                this.show = !this;
                login.show = !login.show;
            }
        }

    })

    //ADMINISTRATOR VUE
    var administrator = new Vue({
        el:'#homepage-administrator',
        data:{
        show: false
        }
    })

    //STUDENT VUE
    var student = new Vue({
        el:'#homepage-student',
        data:{
            show: false
        }
    })

    //GUEST VUE
    var guest = new Vue({
        el:'#homepage-guest',
        data:{
            show: false
        }
    })
</script>
</body>
</html>